{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/ts/LoginClass.ts","src/ts/helpers.ts","src/ts/main.ts"],"names":[],"mappings":"AAAA;;;;;;;;ACCA,IAAA,YAAA,QAAA,WAAA,CAAA;AAEA,IAAiB,UAAjB;AAAA,CAAA,UAAiB,UAAjB,EAA2B;AAAA,QAEV,UAFU;AAKnB,4BAAY,KAAZ,EAAyB;AAAA;;AACrB,iBAAK,MAAL,GAAc,KAAd;AACH;;AAPkB;AAAA;AAAA,yCAST;AACN,oBAAI,cAAc,UAAA,UAAA,CAAW,UAAX,CAAsB,KAAK,MAA3B,CAAlB;AAEA,oBAAI,YAAY,MAAZ,GAAqB,CAArB,IAA0B,YAAY,MAAZ,GAAqB,EAAnD,EACI,OAAO,UAAA,UAAA,CAAW,UAAX,CAAsB,WAAtB,CAAP;AAEJ,uBAAO,KAAP;AACH;AAhBkB;AAAA;AAAA,yCAkBN,GAlBM,EAkBK;AACpB,oBAAI,cAAc,UAAA,UAAA,CAAW,UAAX,CAAsB,KAAK,MAA3B,CAAlB;AAEA,uBAAO,MAAM,GAAN,EAAW;AACd,4BAAQ,MADM;AAEd,0BAAM,KAAK,SAAL,CAAe,EAAE,SAAS,UAAA,UAAA,CAAW,UAAX,CAAsB,WAAtB,CAAX,EAAf,CAFQ;AAGd,6BAAS;AACL,wCAAgB;AADX;AAHK,iBAAX,EAON,IAPM,CAOD;AAAA,2BAAY,SAAS,IAAT,EAAZ;AAAA,iBAPC,EAQN,KARM,CAQA;AAAA,2BAAS,QAAQ,KAAR,CAAc,KAAd,CAAT;AAAA,iBARA,EASN,IATM,CASD,oBAAW;AACb,2BAAO,SAAS,gBAAhB;AACH,iBAXM,CAAP;AAYH;AAjCkB;;AAAA;AAAA;;AAEV,eAAA,UAAA,GAAU,UAAV;;AAFU,QAoCV,UApCU;AAwCnB,4BAAY,KAAZ,EAA2B,QAA3B,EAA2C;AAAA;;AACvC,iBAAK,MAAL,GAAc,KAAd;AACA,iBAAK,SAAL,GAAiB,QAAjB;AACH;;AA3CkB;AAAA;AAAA,yCA6CT;AACN,oBAAI,cAAc,UAAA,UAAA,CAAW,UAAX,CAAsB,KAAK,MAA3B,CAAlB;AAEA,oBAAI,YAAY,MAAZ,IAAsB,CAAtB,IAA2B,KAAK,SAAL,CAAe,MAAf,IAAyB,CAAxD,EACI,OAAO,GAAP;AAEJ,oBAAI,KAAK,SAAL,CAAe,MAAf,GAAwB,CAAxB,IAA6B,KAAK,SAAL,CAAe,MAAf,GAAwB,EAAzD,EACI,OAAO,GAAP;AAEJ,oBAAI,CAAC,UAAA,UAAA,CAAW,UAAX,CAAsB,WAAtB,CAAL,EACI,OAAO,GAAP;AAEJ,uBAAO,GAAP;AACH;AA1DkB;AAAA;AAAA,yCA4DN,GA5DM,EA4DK;AACpB,oBAAI,cAAc,UAAA,UAAA,CAAW,UAAX,CAAsB,KAAK,MAA3B,CAAlB;AAEA,uBAAO,MAAM,GAAN,EAAW;AACd,4BAAQ,MADM;AAEd,0BAAM,KAAK,SAAL,CAAe,EAAE,SAAS,UAAA,UAAA,CAAW,UAAX,CAAsB,WAAtB,CAAX,EAA+C,YAAY,KAAK,SAAhE,EAAf,CAFQ;AAGd,6BAAS;AACL,wCAAgB;AADX;AAHK,iBAAX,EAON,IAPM,CAOD;AAAA,2BAAY,SAAS,IAAT,EAAZ;AAAA,iBAPC,EAQN,KARM,CAQA;AAAA,2BAAS,QAAQ,KAAR,CAAc,KAAd,CAAT;AAAA,iBARA,EASN,IATM,CASD,oBAAW;AACb,2BAAO,KAAK,SAAL,CAAe,QAAf,CAAP;AACH,iBAXM,CAAP;AAYH;AA3EkB;;AAAA;AAAA;;AAoCV,eAAA,UAAA,GAAU,UAAV;AAyChB,CA7ED,EAAiB,aAAA,QAAA,UAAA,KAAA,QAAA,UAAA,GAAU,EAAV,CAAjB;;;;;;ACFA,IAAiB,UAAjB;AAAA,CAAA,UAAiB,UAAjB,EAA2B;AAEvB,aAAgB,UAAhB,CAA4B,UAA5B,EAA8C;AAC1C,YAAM,KAAK,yJAAX;AACA,eAAO,GAAG,IAAH,CAAQ,OAAO,UAAP,EAAmB,WAAnB,EAAR,CAAP;AACH;AAHe,eAAA,UAAA,GAAU,UAAV;AAKhB,aAAgB,UAAhB,CAA2B,UAA3B,EAA6C;AACzC,eAAO,OAAO,UAAP,EAAmB,OAAnB,CAA2B,IAA3B,EAAiC,OAAjC,EAA0C,OAA1C,CAAkD,IAAlD,EAAwD,MAAxD,EAAgE,OAAhE,CAAwE,IAAxE,EAA8E,MAA9E,EAAsF,OAAtF,CAA8F,IAA9F,EAAoG,QAApG,CAAP;AACH;AAFe,eAAA,UAAA,GAAU,UAAV;AAInB,CAXD,EAAiB,aAAA,QAAA,UAAA,KAAA,QAAA,UAAA,GAAU,EAAV,CAAjB;;;;;;ACDA,IAAA,eAAA,QAAA,cAAA,CAAA;AAEA,IAAM,kBAAoC,SAAS,cAAT,CAAwB,WAAxB,CAA1C;AACA,IAAM,qBAAwC,SAAS,cAAT,CAAwB,cAAxB,CAA9C;AACA,IAAM,eAAkC,SAAS,cAAT,CAAwB,UAAxB,CAAxC;AAEA,mBAAmB,QAAnB,GAA8B,IAA9B;AACA,aAAa,QAAb,GAAwB,IAAxB;AAEA,gBAAgB,gBAAhB,CAAiC,OAAjC,EAA0C,YAAK;AAC3C,QAAI,cAAgC,SAAS,cAAT,CAAwB,qBAAxB,CAApC;AACA,QAAI,QAAQ,IAAI,aAAA,UAAA,CAAW,UAAf,CAA0B,gBAAgB,KAA1C,CAAZ;AACA,QAAI,MAAM,yDAAV;AAEA,QAAI,MAAM,UAAN,EAAJ,EAAwB;AACpB,oBAAY,SAAZ,CAAsB,MAAtB,CAA6B,oBAA7B;AACA,oBAAY,SAAZ,CAAsB,GAAtB,CAA0B,YAA1B;AACA,oBAAY,SAAZ,CAAsB,GAAtB,CAA0B,UAA1B;AAEA,mBAAW,YAAK;AACZ,wBAAY,SAAZ,CAAsB,GAAtB,CAA0B,oBAA1B;AACA,wBAAY,SAAZ,CAAsB,MAAtB,CAA6B,YAA7B;AACA,wBAAY,SAAZ,CAAsB,MAAtB,CAA6B,UAA7B;AAEA,kBAAM,YAAN,CAAmB,GAAnB,EAAwB,IAAxB,CAA6B,UAAU,MAAV,EAAgB;AACzC,oBAAI,WAAW,KAAK,KAAL,CAAW,MAAX,CAAf;AAEA,oBAAI,SAAS,SAAb,EAAwB;AACpB,oCAAgB,QAAhB,GAA2B,IAA3B;AACA,uCAAmB,QAAnB,GAA8B,KAA9B;AACA,iCAAa,QAAb,GAAwB,KAAxB;AACH,iBAJD,MAIO;AACH,uCAAmB,QAAnB,GAA8B,IAA9B;AACA,iCAAa,QAAb,GAAwB,IAAxB;AACH;AACJ,aAXD;AAYH,SAjBD,EAiBG,IAjBH;AAkBH;AACJ,CA7BD;AA+BA,aAAa,gBAAb,CAA8B,OAA9B,EAAuC,YAAK;AACxC,QAAI,MAAM,+CAAV;AACA,QAAI,kBAAkB,IAAI,aAAA,UAAA,CAAW,UAAf,CAA0B,gBAAgB,KAA1C,EAAiD,mBAAmB,KAApE,CAAtB;AACA,QAAI,kBAAkB,gBAAgB,UAAhB,EAAtB;AAEA,QAAI,mBAAmB,GAAvB,EAA4B;AACxB,gBAAQ,GAAR,CAAY,8EAAZ;AACH;AAED,QAAI,mBAAmB,GAAvB,EAA4B;AACxB,gBAAQ,GAAR,CAAY,sCAAZ;AACH;AAED,QAAI,mBAAmB,GAAvB,EAA4B;AACxB,wBAAgB,YAAhB,CAA6B,GAA7B,EAAkC,IAAlC,CAAuC,UAAU,MAAV,EAAgB;AACnD,gBAAI,WAAW,KAAK,KAAL,CAAW,MAAX,CAAf;AACA,oBAAQ,GAAR,CAAY,SAAS,WAArB;AACA,oBAAQ,GAAR,CAAY,SAAS,WAArB;AACH,SAJD;AAKH;AAEJ,CArBD","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import { Interfaces } from \"./interfaces\";\r\nimport { Validation } from \"./helpers\";\r\n\r\nexport namespace LoginClass {\r\n\r\n    export class CheckEmail implements Interfaces.ICheckEmail {\r\n        _email: string;\r\n\r\n        constructor(email: string) {\r\n            this._email = email;\r\n        }\r\n\r\n        checkEmail(): boolean {\r\n            let input_email = Validation.cleanInput(this._email);\r\n\r\n            if (input_email.length > 6 && input_email.length < 79) \r\n                return Validation.validEmail(input_email);\r\n            \r\n            return false;\r\n        }\r\n\r\n        RequestEmail(url: string): Promise<string> {\r\n            let input_email = Validation.cleanInput(this._email);\r\n          \r\n            return fetch(url, {\r\n                method: 'POST',\r\n                body: JSON.stringify({ 'Email': Validation.cleanInput(input_email) }),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            .then(response => response.json())\r\n            .catch(error => console.error(error))\r\n            .then(response => {\r\n                return response.CheckEmailResult;                   \r\n            });\r\n        }\r\n    }\r\n\r\n    export class CheckLogin implements Interfaces.ICheckLogin {\r\n        _email: string;\r\n        _password: string;\r\n\r\n        constructor(email: string, password: string) {\r\n            this._email = email;\r\n            this._password = password;\r\n        }\r\n\r\n        checkLogin(): Number {\r\n            let input_email = Validation.cleanInput(this._email);\r\n\r\n            if (input_email.length == 0 && this._password.length == 0)\r\n                return 450;\r\n\r\n            if (this._password.length < 7 && this._password.length > 18)\r\n                return 400;\r\n\r\n            if (!Validation.validEmail(input_email))\r\n                return 415;\r\n            \r\n            return 200;\r\n        }\r\n\r\n        RequestLogin(url: string): Promise<string> {\r\n            let input_email = Validation.cleanInput(this._email);\r\n\r\n            return fetch(url, {\r\n                method: 'POST',\r\n                body: JSON.stringify({ 'Email': Validation.cleanInput(input_email), 'Password': this._password }),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            .then(response => response.json())\r\n            .catch(error => console.error(error))\r\n            .then(response => {                \r\n                return JSON.stringify(response);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n","\r\nexport namespace Validation {\r\n\r\n    export function validEmail (InputEmail: string) : boolean {\r\n        const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        return re.test(String(InputEmail).toLowerCase());\r\n    }\r\n\r\n    export function cleanInput(InputEmail: string): string {\r\n        return String(InputEmail).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\r\n    }\r\n\r\n}\r\n","import { LoginClass } from \"./LoginClass\";\r\n\r\nconst input_TextEmail = <HTMLInputElement>document.getElementById('TextEmail');\r\nconst input_TextPassword = (<HTMLInputElement>document.getElementById(\"TextPassword\"));\r\nconst btn_BtnLogin = (<HTMLInputElement>document.getElementById(\"BtnLogin\"));\r\n\r\ninput_TextPassword.disabled = true;\r\nbtn_BtnLogin.disabled = true;\r\n\r\ninput_TextEmail.addEventListener('keyup', () => {\r\n    let icon_loader = <HTMLInputElement>document.getElementById('search_email_loader');\r\n    let input = new LoginClass.CheckEmail(input_TextEmail.value);\r\n    let url = 'http://localhost:51099/wscheckemail.svc/auth/checkemail';\r\n   \r\n    if (input.checkEmail()) {\r\n        icon_loader.classList.remove('fa-envelope-square');\r\n        icon_loader.classList.add('fa-spinner');\r\n        icon_loader.classList.add('fa-pulse');\r\n\r\n        setTimeout(() => {\r\n            icon_loader.classList.add('fa-envelope-square');\r\n            icon_loader.classList.remove('fa-spinner');\r\n            icon_loader.classList.remove('fa-pulse');\r\n\r\n            input.RequestEmail(url).then(function (result) {\r\n                let response = JSON.parse(result);\r\n\r\n                if (response.Respuesta) {\r\n                    input_TextEmail.disabled = true;\r\n                    input_TextPassword.disabled = false;\r\n                    btn_BtnLogin.disabled = false;\r\n                } else {\r\n                    input_TextPassword.disabled = true;\r\n                    btn_BtnLogin.disabled = true;\r\n                }\r\n            });\r\n        }, 3000);\r\n    }\r\n});\r\n\r\nbtn_BtnLogin.addEventListener('click', () => {\r\n    let url = 'http://localhost:51099/wslogin.svc/auth/login';\r\n    let validClassLogin = new LoginClass.CheckLogin(input_TextEmail.value, input_TextPassword.value);\r\n    let validCheckLogin = validClassLogin.checkLogin();\r\n    \r\n    if (validCheckLogin == 400) {\r\n        console.log('La contraseï¿½a no contiene la longitud correcta o se encuentra vacio el campo');\r\n    }\r\n\r\n    if (validCheckLogin == 415) {\r\n        console.log('El correo proporcionado no es valido');\r\n    }\r\n\r\n    if (validCheckLogin == 200) {\r\n        validClassLogin.RequestLogin(url).then(function (result) {\r\n            let response = JSON.parse(result);\r\n            console.log(response.LoginResult);\r\n            console.log(response.ErrorStatus);\r\n        });\r\n    }\r\n\r\n});"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdHMvTG9naW5DbGFzcy50cyIsInNyYy90cy9oZWxwZXJzLnRzIiwic3JjL3RzL21haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0FDQ0EsSUFBQSxZQUFBLFFBQUEsV0FBQSxDQUFBO0FBRUEsSUFBaUIsVUFBakI7QUFBQSxDQUFBLFVBQWlCLFVBQWpCLEVBQTJCO0FBQUEsUUFFVixVQUZVO0FBS25CLDRCQUFZLEtBQVosRUFBeUI7QUFBQTs7QUFDckIsaUJBQUssTUFBTCxHQUFjLEtBQWQ7QUFDSDs7QUFQa0I7QUFBQTtBQUFBLHlDQVNUO0FBQ04sb0JBQUksY0FBYyxVQUFBLFVBQUEsQ0FBVyxVQUFYLENBQXNCLEtBQUssTUFBM0IsQ0FBbEI7QUFFQSxvQkFBSSxZQUFZLE1BQVosR0FBcUIsQ0FBckIsSUFBMEIsWUFBWSxNQUFaLEdBQXFCLEVBQW5ELEVBQ0ksT0FBTyxVQUFBLFVBQUEsQ0FBVyxVQUFYLENBQXNCLFdBQXRCLENBQVA7QUFFSix1QkFBTyxLQUFQO0FBQ0g7QUFoQmtCO0FBQUE7QUFBQSx5Q0FrQk4sR0FsQk0sRUFrQks7QUFDcEIsb0JBQUksY0FBYyxVQUFBLFVBQUEsQ0FBVyxVQUFYLENBQXNCLEtBQUssTUFBM0IsQ0FBbEI7QUFFQSx1QkFBTyxNQUFNLEdBQU4sRUFBVztBQUNkLDRCQUFRLE1BRE07QUFFZCwwQkFBTSxLQUFLLFNBQUwsQ0FBZSxFQUFFLFNBQVMsVUFBQSxVQUFBLENBQVcsVUFBWCxDQUFzQixXQUF0QixDQUFYLEVBQWYsQ0FGUTtBQUdkLDZCQUFTO0FBQ0wsd0NBQWdCO0FBRFg7QUFISyxpQkFBWCxFQU9OLElBUE0sQ0FPRDtBQUFBLDJCQUFZLFNBQVMsSUFBVCxFQUFaO0FBQUEsaUJBUEMsRUFRTixLQVJNLENBUUE7QUFBQSwyQkFBUyxRQUFRLEtBQVIsQ0FBYyxLQUFkLENBQVQ7QUFBQSxpQkFSQSxFQVNO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QSxhQUFhLGdCQUFiLENBQThCLE9BQTlCLEVBQXVDLFlBQUs7QUFDeEMsUUFBSSxNQUFNLCtDQUFWO0FBQ0EsUUFBSSxrQkFBa0IsSUFBSSxhQUFBLFVBQUEsQ0FBVyxVQUFmLENBQTBCLGdCQUFnQixLQUExQyxFQUFpRCxtQkFBbUIsS0FBcEUsQ0FBdEI7QUFDQSxRQUFJLGtCQUFrQixnQkFBZ0IsVUFBaEIsRUFBdEI7QUFFQSxRQUFJLG1CQUFtQixHQUF2QixFQUE0QjtBQUN4QixnQkFBUSxHQUFSLENBQVksOEVBQVo7QUFDSDtBQUVELFFBQUksbUJBQW1CLEdBQXZCLEVBQTRCO0FBQ3hCLGdCQUFRLEdBQVIsQ0FBWSxzQ0FBWjtBQUNIO0FBRUQsUUFBSSxtQkFBbUIsR0FBdkIsRUFBNEI7QUFDeEIsd0JBQWdCLFlBQWhCLENBQTZCLEdBQTdCLEVBQWtDLElBQWxDLENBQXVDLFVBQVUsTUFBVixFQUFnQjtBQUNuRCxnQkFBSSxXQUFXLEtBQUssS0FBTCxDQUFXLE1BQVgsQ0FBZjtBQUNBLG9CQUFRLEdBQVIsQ0FBWSxTQUFTLFdBQXJCO0FBQ0Esb0JBQVEsR0FBUixDQUFZLFNBQVMsV0FBckI7QUFDSCxTQUpEO0FBS0g7QUFFSixDQXJCRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCB7IEludGVyZmFjZXMgfSBmcm9tIFwiLi9pbnRlcmZhY2VzXCI7XHJcbmltcG9ydCB7IFZhbGlkYXRpb24gfSBmcm9tIFwiLi9oZWxwZXJzXCI7XHJcblxyXG5leHBvcnQgbmFtZXNwYWNlIExvZ2luQ2xhc3Mge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBDaGVja0VtYWlsIGltcGxlbWVudHMgSW50ZXJmYWNlcy5JQ2hlY2tFbWFpbCB7XHJcbiAgICAgICAgX2VtYWlsOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKGVtYWlsOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5fZW1haWwgPSBlbWFpbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNoZWNrRW1haWwoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGxldCBpbnB1dF9lbWFpbCA9IFZhbGlkYXRpb24uY2xlYW5JbnB1dCh0aGlzLl9lbWFpbCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5wdXRfZW1haWwubGVuZ3RoID4gNiAmJiBpbnB1dF9lbWFpbC5sZW5ndGggPCA3OSkgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVmFsaWRhdGlvbi52YWxpZEVtYWlsKGlucHV0X2VtYWlsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFJlcXVlc3RFbWFpbCh1cmw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgICAgIGxldCBpbnB1dF9lbWFpbCA9IFZhbGlkYXRpb24uY2xlYW5JbnB1dCh0aGlzLl9lbWFpbCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGZldGNoKHVybCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7ICdFbWFpbCc6IFZhbGlkYXRpb24uY2xlYW5JbnB1dChpbnB1dF9lbWFpbCkgfSksXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmVycm9yKGVycm9yKSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLkNoZWNrRW1haWxSZXN1bHQ7ICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIENoZWNrTG9naW4gaW1wbGVtZW50cyBJbnRlcmZhY2VzLklDaGVja0xvZ2luIHtcclxuICAgICAgICBfZW1haWw6IHN0cmluZztcclxuICAgICAgICBfcGFzc3dvcmQ6IHN0cmluZztcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykge1xyXG4gICAgICAgICAgICB0aGlzLl9lbWFpbCA9IGVtYWlsO1xyXG4gICAgICAgICAgICB0aGlzLl9wYXNzd29yZCA9IHBhc3N3b3JkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2hlY2tMb2dpbigpOiBOdW1iZXIge1xyXG4gICAgICAgICAgICBsZXQgaW5wdXRfZW1haWwgPSBWYWxpZGF0aW9uLmNsZWFuSW5wdXQodGhpcy5fZW1haWwpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlucHV0X2VtYWlsLmxlbmd0aCA9PSAwICYmIHRoaXMuX3Bhc3N3b3JkLmxlbmd0aCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDQ1MDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9wYXNzd29yZC5sZW5ndGggPCA3ICYmIHRoaXMuX3Bhc3N3b3JkLmxlbmd0aCA+IDE4KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDQwMDtcclxuXHJcbiAgICAgICAgICAgIGlmICghVmFsaWRhdGlvbi52YWxpZEVtYWlsKGlucHV0X2VtYWlsKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiA0MTU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gMjAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgUmVxdWVzdExvZ2luKHVybDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICAgICAgbGV0IGlucHV0X2VtYWlsID0gVmFsaWRhdGlvbi5jbGVhbklucHV0KHRoaXMuX2VtYWlsKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyAnRW1haWwnOiBWYWxpZGF0aW9uLmNsZWFuSW5wdXQoaW5wdXRfZW1haWwpLCAnUGFzc3dvcmQnOiB0aGlzLl9wYXNzd29yZCB9KSxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoZXJyb3IpKVxyXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJcclxuZXhwb3J0IG5hbWVzcGFjZSBWYWxpZGF0aW9uIHtcclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gdmFsaWRFbWFpbCAoSW5wdXRFbWFpbDogc3RyaW5nKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IHJlID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcclxuICAgICAgICByZXR1cm4gcmUudGVzdChTdHJpbmcoSW5wdXRFbWFpbCkudG9Mb3dlckNhc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNsZWFuSW5wdXQoSW5wdXRFbWFpbDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gU3RyaW5nKElucHV0RW1haWwpLnJlcGxhY2UoLyYvZywgJyZhbXA7JykucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoLz4vZywgJyZndDsnKS5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7Jyk7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7IExvZ2luQ2xhc3MgfSBmcm9tIFwiLi9Mb2dpbkNsYXNzXCI7XHJcblxyXG5jb25zdCBpbnB1dF9UZXh0RW1haWwgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnVGV4dEVtYWlsJyk7XHJcbmNvbnN0IGlucHV0X1RleHRQYXNzd29yZCA9ICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIlRleHRQYXNzd29yZFwiKSk7XHJcbmNvbnN0IGJ0bl9CdG5Mb2dpbiA9ICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkJ0bkxvZ2luXCIpKTtcclxuXHJcbmlucHV0X1RleHRQYXNzd29yZC5kaXNhYmxlZCA9IHRydWU7XHJcbmJ0bl9CdG5Mb2dpbi5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG5pbnB1dF9UZXh0RW1haWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoKSA9PiB7XHJcbiAgICBsZXQgaWNvbl9sb2FkZXIgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoX2VtYWlsX2xvYWRlcicpO1xyXG4gICAgbGV0IGlucHV0ID0gbmV3IExvZ2luQ2xhc3MuQ2hlY2tFbWFpbChpbnB1dF9UZXh0RW1haWwudmFsdWUpO1xyXG4gICAgbGV0IHVybCA9ICdodHRwOi8vbG9jYWxob3N0OjUxMDk5L3dzY2hlY2tlbWFpbC5zdmMvYXV0aC9jaGVja2VtYWlsJztcclxuICAgXHJcbiAgICBpZiAoaW5wdXQuY2hlY2tFbWFpbCgpKSB7XHJcbiAgICAgICAgaWNvbl9sb2FkZXIuY2xhc3NMaXN0LnJlbW92ZSgnZmEtZW52ZWxvcGUtc3F1YXJlJyk7XHJcbiAgICAgICAgaWNvbl9sb2FkZXIuY2xhc3NMaXN0LmFkZCgnZmEtc3Bpbm5lcicpO1xyXG4gICAgICAgIGljb25fbG9hZGVyLmNsYXNzTGlzdC5hZGQoJ2ZhLXB1bHNlJyk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBpY29uX2xvYWRlci5jbGFzc0xpc3QuYWRkKCdmYS1lbnZlbG9wZS1zcXVhcmUnKTtcclxuICAgICAgICAgICAgaWNvbl9sb2FkZXIuY2xhc3NMaXN0LnJlbW92ZSgnZmEtc3Bpbm5lcicpO1xyXG4gICAgICAgICAgICBpY29uX2xvYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdmYS1wdWxzZScpO1xyXG5cclxuICAgICAgICAgICAgaW5wdXQuUmVxdWVzdEVtYWlsKHVybCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3VsdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLlJlc3B1ZXN0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0X1RleHRFbWFpbC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRfVGV4dFBhc3N3b3JkLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuX0J0bkxvZ2luLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0X1RleHRQYXNzd29yZC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuX0J0bkxvZ2luLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgMzAwMCk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuYnRuX0J0bkxvZ2luLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgbGV0IHVybCA9ICdodHRwOi8vbG9jYWxob3N0OjUxMDk5L3dzbG9naW4uc3ZjL2F1dGgvbG9naW4nO1xyXG4gICAgbGV0IHZhbGlkQ2xhc3NMb2dpbiA9IG5ldyBMb2dpbkNsYXNzLkNoZWNrTG9naW4oaW5wdXRfVGV4dEVtYWlsLnZhbHVlLCBpbnB1dF9UZXh0UGFzc3dvcmQudmFsdWUpO1xyXG4gICAgbGV0IHZhbGlkQ2hlY2tMb2dpbiA9IHZhbGlkQ2xhc3NMb2dpbi5jaGVja0xvZ2luKCk7XHJcbiAgICBcclxuICAgIGlmICh2YWxpZENoZWNrTG9naW4gPT0gNDAwKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0xhIGNvbnRyYXNl77+9YSBubyBjb250aWVuZSBsYSBsb25naXR1ZCBjb3JyZWN0YSBvIHNlIGVuY3VlbnRyYSB2YWNpbyBlbCBjYW1wbycpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh2YWxpZENoZWNrTG9naW4gPT0gNDE1KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0VsIGNvcnJlbyBwcm9wb3JjaW9uYWRvIG5vIGVzIHZhbGlkbycpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh2YWxpZENoZWNrTG9naW4gPT0gMjAwKSB7XHJcbiAgICAgICAgdmFsaWRDbGFzc0xvZ2luLlJlcXVlc3RMb2dpbih1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLkxvZ2luUmVzdWx0KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuRXJyb3JTdGF0dXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufSk7Il19"}