{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/ts/LoginClass.ts","src/ts/helpers.ts","src/ts/main.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import { Interfaces } from \"./interfaces\";\r\nimport { Validation } from \"./helpers\";\r\n\r\nexport namespace LoginClass {\r\n\r\n    export class CheckEmail implements Interfaces.ICheckEmail {\r\n        _email: string;\r\n\r\n        constructor(email: string) {\r\n            this._email = email;\r\n        }\r\n\r\n        checkEmail(): boolean {\r\n            let input_email = Validation.cleanInput(this._email);\r\n\r\n            if (input_email.length > 6 && input_email.length < 79) \r\n                return Validation.validEmail(input_email);\r\n            \r\n            return false;\r\n        }\r\n\r\n        RequestEmail(url: string): Promise<string> {\r\n            let input_email = Validation.cleanInput(this._email);\r\n          \r\n            return fetch(url, {\r\n                        method: 'POST',\r\n                        body: JSON.stringify({ 'Email': Validation.cleanInput(input_email) }),\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n            })\r\n            .then(response => response.json())\r\n            .catch(error => console.error(error))\r\n            .then(response => {\r\n                return response.CheckEmailResult;                   \r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n","\r\nexport namespace Validation {\r\n\r\n    export function validEmail (InputEmail: string) : boolean {\r\n        const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        return re.test(String(InputEmail).toLowerCase());\r\n    }\r\n\r\n    export function cleanInput(InputEmail: string): string {\r\n        return String(InputEmail).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\r\n    }\r\n\r\n}\r\n","import { LoginClass } from \"./LoginClass\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst login_section = <HTMLInputElement>document.getElementById('section-login');\r\nconst input_TextEmail = <HTMLInputElement>document.getElementById('TextEmail');\r\nconst input_TextPassword = (<HTMLInputElement>document.getElementById(\"TextPassword\"));\r\nconst btn_BtnLogin = (<HTMLInputElement>document.getElementById(\"BtnLogin\"));\r\nlet icon_loader = <HTMLInputElement>document.getElementById('search_email_loader');\r\n\r\nicon_loader.classList.add('fa-envelope-square');\r\ninput_TextPassword.disabled = true;\r\nbtn_BtnLogin.disabled = true;\r\n\r\n\r\nlogin_section.addEventListener('load', () => {\r\n    window.history.forward();\r\n});\r\n\r\ninput_TextEmail.addEventListener('keyup', () => {\r\n    \r\n    let input = new LoginClass.CheckEmail(input_TextEmail.value);\r\n    let url = 'http://localhost:50851/wscheckemail.svc/auth/checkemail';\r\n   \r\n    if (input.checkEmail()) {\r\n        icon_loader.classList.remove('fa-envelope-square');\r\n        icon_loader.classList.remove('fa-times-circle');\r\n        icon_loader.classList.add('fa-spinner');\r\n        icon_loader.classList.add('fa-pulse');\r\n\r\n        setTimeout(() => {\r\n            icon_loader.classList.remove('fa-spinner');\r\n            icon_loader.classList.remove('fa-pulse');\r\n\r\n            input.RequestEmail(url).then(function (result) {\r\n                let response = JSON.parse(result);\r\n\r\n                if (response.Status == 404) \r\n                    icon_loader.classList.add('fa-times-circle');\r\n                \r\n                if (response.Status == 401) {\r\n                    icon_loader.classList.add('fa-times-circle');\r\n                    document.cookie = '_inactiva=1';\r\n                    window.location.href = '/lockout';\r\n                }\r\n\r\n                if (response.Status == 200) {\r\n                    icon_loader.classList.remove('fa-times-circle');\r\n                    icon_loader.classList.add('fa-check-square');\r\n                    input_TextPassword.disabled = false;\r\n                    btn_BtnLogin.disabled = false;\r\n                }\r\n            });\r\n        }, 4000);\r\n    } else {\r\n        icon_loader.classList.add('fa-envelope-square');\r\n        input_TextPassword.disabled = true;\r\n        btn_BtnLogin.disabled = true;\r\n    }\r\n});\r\n\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdHMvTG9naW5DbGFzcy50cyIsInNyYy90cy9oZWxwZXJzLnRzIiwic3JjL3RzL21haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0FDQ0EsSUFBQSxZQUFBLFFBQUEsV0FBQSxDQUFBO0FBRUEsSUFBaUIsVUFBakI7QUFBQSxDQUFBLFVBQWlCLFVBQWpCLEVBQTJCO0FBQUEsUUFFVixVQUZVO0FBS25CLDRCQUFZLEtBQVosRUFBeUI7QUFBQTs7QUFDckIsaUJBQUssTUFBTCxHQUFjLEtBQWQ7QUFDSDs7QUFQa0I7QUFBQTtBQUFBLHlDQVNUO0FBQ04sb0JBQUksY0FBYyxVQUFBLFVBQUEsQ0FBVyxVQUFYLENBQXNCLEtBQUssTUFBM0IsQ0FBbEI7QUFFQSxvQkFBSSxZQUFZLE1BQVosR0FBcUIsQ0FBckIsSUFBMEIsWUFBWSxNQUFaLEdBQXFCLEVBQW5ELEVBQ0ksT0FBTyxVQUFBLFVBQUEsQ0FBVyxVQUFYLENBQXNCLFdBQXRCLENBQVA7QUFFSix1QkFBTyxLQUFQO0FBQ0g7QUFoQmtCO0FBQUE7QUFBQSx5Q0FrQk4sR0FsQk0sRUFrQks7QUFDcEIsb0JBQUksY0FBYyxVQUFBLFVBQUEsQ0FBVyxVQUFYLENBQXNCLEtBQUssTUFBM0IsQ0FBbEI7QUFFQSx1QkFBTyxNQUFNLEdBQU4sRUFBVztBQUNOLDRCQUFRLE1BREY7QUFFTiwwQkFBTSxLQUFLLFNBQUwsQ0FBZSxFQUFFLFNBQVMsVUFBQSxVQUFBLENBQVcsVUFBWCxDQUFzQixXQUF0QixDQUFYLEVBQWYsQ0FGQTtBQUdOLDZCQUFTO0FBQ0wsd0NBQWdCO0FBRFg7QUFISCxpQkFBWCxFQU9OLElBUE0sQ0FPRDtBQUFBLDJCQUFZLFNBQVMsSUFBVCxFQUFaO0FBQUEsaUJBUEMsRUFRTixLQVJNLENBUUE7QUFBQSwyQkFBUyxRQUFRLEtBQVIsQ0FBYyxLQUFkLENBQVQ7QUFBQSxpQkFSQSxFQVNO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QUNBLDJCQUFPLFFBQVAsQ0FBZ0IsSUFBaEIsR0FBdUIsVUFBdkI7QUFDSDtBQUVELG9CQUFJLFNBQVMsTUFBVCxJQUFtQixHQUF2QixFQUE0QjtBQUN4QixnQ0FBWSxTQUFaLENBQXNCLE1BQXRCLENBQTZCLGlCQUE3QjtBQUNBLGdDQUFZLFNBQVosQ0FBc0IsR0FBdEIsQ0FBMEIsaUJBQTFCO0FBQ0EsdUNBQW1CLFFBQW5CLEdBQThCLEtBQTlCO0FBQ0EsaUNBQWEsUUFBYixHQUF3QixLQUF4QjtBQUNIO0FBQ0osYUFsQkQ7QUFtQkgsU0F2QkQsRUF1QkcsSUF2Qkg7QUF3QkgsS0E5QkQsTUE4Qk87QUFDSCxvQkFBWSxTQUFaLENBQXNCLEdBQXRCLENBQTBCLG9CQUExQjtBQUNBLDJCQUFtQixRQUFuQixHQUE4QixJQUE5QjtBQUNBLHFCQUFhLFFBQWIsR0FBd0IsSUFBeEI7QUFDSDtBQUNKLENBeENEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IHsgSW50ZXJmYWNlcyB9IGZyb20gXCIuL2ludGVyZmFjZXNcIjtcclxuaW1wb3J0IHsgVmFsaWRhdGlvbiB9IGZyb20gXCIuL2hlbHBlcnNcIjtcclxuXHJcbmV4cG9ydCBuYW1lc3BhY2UgTG9naW5DbGFzcyB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIENoZWNrRW1haWwgaW1wbGVtZW50cyBJbnRlcmZhY2VzLklDaGVja0VtYWlsIHtcclxuICAgICAgICBfZW1haWw6IHN0cmluZztcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoZW1haWw6IHN0cmluZykge1xyXG4gICAgICAgICAgICB0aGlzLl9lbWFpbCA9IGVtYWlsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2hlY2tFbWFpbCgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgbGV0IGlucHV0X2VtYWlsID0gVmFsaWRhdGlvbi5jbGVhbklucHV0KHRoaXMuX2VtYWlsKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbnB1dF9lbWFpbC5sZW5ndGggPiA2ICYmIGlucHV0X2VtYWlsLmxlbmd0aCA8IDc5KSBcclxuICAgICAgICAgICAgICAgIHJldHVybiBWYWxpZGF0aW9uLnZhbGlkRW1haWwoaW5wdXRfZW1haWwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgUmVxdWVzdEVtYWlsKHVybDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICAgICAgbGV0IGlucHV0X2VtYWlsID0gVmFsaWRhdGlvbi5jbGVhbklucHV0KHRoaXMuX2VtYWlsKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gZmV0Y2godXJsLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7ICdFbWFpbCc6IFZhbGlkYXRpb24uY2xlYW5JbnB1dChpbnB1dF9lbWFpbCkgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmVycm9yKGVycm9yKSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLkNoZWNrRW1haWxSZXN1bHQ7ICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsIlxyXG5leHBvcnQgbmFtZXNwYWNlIFZhbGlkYXRpb24ge1xyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB2YWxpZEVtYWlsIChJbnB1dEVtYWlsOiBzdHJpbmcpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgcmUgPSAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xyXG4gICAgICAgIHJldHVybiByZS50ZXN0KFN0cmluZyhJbnB1dEVtYWlsKS50b0xvd2VyQ2FzZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gY2xlYW5JbnB1dChJbnB1dEVtYWlsOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBTdHJpbmcoSW5wdXRFbWFpbCkucmVwbGFjZSgvJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpLnJlcGxhY2UoL1wiL2csICcmcXVvdDsnKTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHsgTG9naW5DbGFzcyB9IGZyb20gXCIuL0xvZ2luQ2xhc3NcIjtcclxuaW1wb3J0IFN3YWwgZnJvbSBcInN3ZWV0YWxlcnQyXCI7XHJcblxyXG5jb25zdCBsb2dpbl9zZWN0aW9uID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY3Rpb24tbG9naW4nKTtcclxuY29uc3QgaW5wdXRfVGV4dEVtYWlsID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1RleHRFbWFpbCcpO1xyXG5jb25zdCBpbnB1dF9UZXh0UGFzc3dvcmQgPSAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJUZXh0UGFzc3dvcmRcIikpO1xyXG5jb25zdCBidG5fQnRuTG9naW4gPSAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJCdG5Mb2dpblwiKSk7XHJcbmxldCBpY29uX2xvYWRlciA9IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hfZW1haWxfbG9hZGVyJyk7XHJcblxyXG5pY29uX2xvYWRlci5jbGFzc0xpc3QuYWRkKCdmYS1lbnZlbG9wZS1zcXVhcmUnKTtcclxuaW5wdXRfVGV4dFBhc3N3b3JkLmRpc2FibGVkID0gdHJ1ZTtcclxuYnRuX0J0bkxvZ2luLmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcblxyXG5sb2dpbl9zZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcbiAgICB3aW5kb3cuaGlzdG9yeS5mb3J3YXJkKCk7XHJcbn0pO1xyXG5cclxuaW5wdXRfVGV4dEVtYWlsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKCkgPT4ge1xyXG4gICAgXHJcbiAgICBsZXQgaW5wdXQgPSBuZXcgTG9naW5DbGFzcy5DaGVja0VtYWlsKGlucHV0X1RleHRFbWFpbC52YWx1ZSk7XHJcbiAgICBsZXQgdXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6NTA4NTEvd3NjaGVja2VtYWlsLnN2Yy9hdXRoL2NoZWNrZW1haWwnO1xyXG4gICBcclxuICAgIGlmIChpbnB1dC5jaGVja0VtYWlsKCkpIHtcclxuICAgICAgICBpY29uX2xvYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdmYS1lbnZlbG9wZS1zcXVhcmUnKTtcclxuICAgICAgICBpY29uX2xvYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdmYS10aW1lcy1jaXJjbGUnKTtcclxuICAgICAgICBpY29uX2xvYWRlci5jbGFzc0xpc3QuYWRkKCdmYS1zcGlubmVyJyk7XHJcbiAgICAgICAgaWNvbl9sb2FkZXIuY2xhc3NMaXN0LmFkZCgnZmEtcHVsc2UnKTtcclxuXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGljb25fbG9hZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLXNwaW5uZXInKTtcclxuICAgICAgICAgICAgaWNvbl9sb2FkZXIuY2xhc3NMaXN0LnJlbW92ZSgnZmEtcHVsc2UnKTtcclxuXHJcbiAgICAgICAgICAgIGlucHV0LlJlcXVlc3RFbWFpbCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXN1bHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5TdGF0dXMgPT0gNDA0KSBcclxuICAgICAgICAgICAgICAgICAgICBpY29uX2xvYWRlci5jbGFzc0xpc3QuYWRkKCdmYS10aW1lcy1jaXJjbGUnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLlN0YXR1cyA9PSA0MDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uX2xvYWRlci5jbGFzc0xpc3QuYWRkKCdmYS10aW1lcy1jaXJjbGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSAnX2luYWN0aXZhPTEnO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9sb2Nrb3V0JztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuU3RhdHVzID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGljb25fbG9hZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhLXRpbWVzLWNpcmNsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGljb25fbG9hZGVyLmNsYXNzTGlzdC5hZGQoJ2ZhLWNoZWNrLXNxdWFyZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0X1RleHRQYXNzd29yZC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ0bl9CdG5Mb2dpbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCA0MDAwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWNvbl9sb2FkZXIuY2xhc3NMaXN0LmFkZCgnZmEtZW52ZWxvcGUtc3F1YXJlJyk7XHJcbiAgICAgICAgaW5wdXRfVGV4dFBhc3N3b3JkLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICBidG5fQnRuTG9naW4uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbiJdfQ=="}